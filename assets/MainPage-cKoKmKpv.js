import{r as a,j as s,C as F,S}from"./index-0qP4JDPy.js";import{P as f}from"./index-9nBWxqvi.js";import{E as q}from"./ErrorMassage-AM8m9Sib.js";import{f as M,E as R}from"./ErrorBoundary-SP3-HYT-.js";const P=()=>{const[i,e]=a.useState(!1),[c,r]=a.useState(null),C=a.useCallback(async(l,v="GET",d=null,n={"Content-Type":"application/json"})=>{e(!0);try{const o=await fetch(l,{method:v,body:d,headers:n});if(!o.ok)throw new Error(`Could not fetch ${l}, status: ${o.status}`);const m=await o.json();return e(!1),m}catch(o){throw e(!1),r(o.message),o}},[]),p=a.useCallback(()=>r(null),[]);return{loading:i,request:C,error:c,clearError:p}},A=()=>{const{loading:i,request:e,error:c,clearError:r}=P(),C="https://api.thecatapi.com/v1/images/",p="api_key=live_kMAH8PmMQcIwxUbi8PAImV1saIaXAaJfC9iX7f0JwifypVCWMvXn2meoVi9ITd0I",l=33,v=async(n=l)=>(await e(`${C}search?limit=15&order=ASC&page=${n}&${p}`)).map(d),d=n=>({id:n.id,thumbnail:n.url,favorite:!1});return{loading:i,error:c,clearError:r,getAllCats:v}},T="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1_2165)'%3e%3cpath%20d='M33%206C29.52%206%2026.18%207.62%2024%2010.18C21.82%207.62%2018.48%206%2015%206C8.84%206%204%2010.84%204%2017C4%2024.56%2010.8%2030.72%2021.1%2040.08L24%2042.7L26.9%2040.06C37.2%2030.72%2044%2024.56%2044%2017C44%2010.84%2039.16%206%2033%206ZM24.2%2037.1L24%2037.3L23.8%2037.1C14.28%2028.48%208%2022.78%208%2017C8%2013%2011%2010%2015%2010C18.08%2010%2021.08%2011.98%2022.14%2014.72H25.88C26.92%2011.98%2029.92%2010%2033%2010C37%2010%2040%2013%2040%2017C40%2022.78%2033.72%2028.48%2024.2%2037.1Z'%20fill='%23F24E1E'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_1_2165'%3e%3crect%20width='48'%20height='48'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",x=i=>{const[e,c]=a.useState([]),[r,C]=a.useState(18),[p,l]=a.useState(!1),[v,d]=a.useState(!0),{loading:n,error:o,getAllCats:m}=A(),{favoriteCatList:_,addCatInFavoriteList:y,removeCatInFavoriteList:I}=i;a.useEffect(()=>()=>{g(r)},[]);function g(t){d(!0),m(t).then(b).finally(d(!1))}function b(t){c(h=>[...h,...t]),C(h=>h+15),l(t.length<15)}function E(t){t.favorite?I(t):y(t),t.favorite=!t.favorite}const w=a.useCallback(t=>{const h=t.map(u=>(_.map(L=>L.id===u.id&&(u=L)),s.jsx("li",{className:"cats__item",style:{backgroundImage:`url(${u.thumbnail})`},tabIndex:"0",children:s.jsx("img",{src:u.favorite?M:T,alt:"cat",className:"cats__like",onClick:()=>E(u),tabIndex:"0"})},u.id)));return s.jsx("ul",{className:"cats__grid",children:h})},[e])(e),j=n&&s.jsx(S,{}),k=o&&s.jsx(q,{});return s.jsxs(F,{children:[w,j,k,s.jsx("button",{className:"cats__button",disabled:v,onClick:()=>g(r),style:{display:p?"none":"block"},children:s.jsx("div",{className:"cats__button-text",children:"Хочу ещё"})})]})};x.propTypes={favoriteCatList:f.array.isRequired,addCatInFavoriteList:f.func.isRequired,removeCatInFavoriteList:f.func.isRequired};const $=i=>{const{favoriteCatList:e,addCatInFavoriteList:c,removeCatInFavoriteList:r}=i;return s.jsx(R,{children:s.jsx(x,{favoriteCatList:e,addCatInFavoriteList:c,removeCatInFavoriteList:r})})};$.propTypes={favoriteCatList:f.array.isRequired,addCatInFavoriteList:f.func.isRequired,removeCatInFavoriteList:f.func.isRequired};export{$ as default};
